{% extends "base.html" %}

{% block content %}
<h2>Khu Vá»±c Thá»­ ThÃ¡ch (CTF)</h2>

<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">Gá»£i Ã½ tá»« GiÃ¡o ViÃªn:</h5>
        <p class="card-text text-info fw-bold">{{ hint }}</p>
        
        <form method="POST" action="{{ url_for('challenge') }}">
            <div class="mb-3">
                <label>Nháº­p Ä‘Ã¡p Ã¡n cá»§a báº¡n (TÃªn file khÃ´ng bao gá»“m .txt):</label>
                <input type="text" name="answer" class="form-control" placeholder="Nháº­p cÃ¢u tráº£ lá»i...">
            </div>
            <button type="submit" class="btn btn-primary">Kiá»ƒm tra Ä‘Ã¡p Ã¡n</button>
        </form>

        {% if success_file %}
        <div class="mt-4 alert alert-success">
            <p>ðŸŽ‰ ChÃ­nh xÃ¡c! Báº¡n Ä‘Ã£ tÃ¬m ra file: <strong>{{ success_file }}</strong></p>
            <a href="{{ url_for('download_challenge', filename=success_file) }}" class="btn btn-success">
                ðŸ“¥ Táº£i ná»™i dung bÃ i thÆ¡/vÄƒn
            </a>
        </div>
        {% endif %}
    </div>
</div>

<hr>

<div class="card mb-4 border-info">
    <div class="card-body">
        <h5 class="card-title">Ná»™p BÃ i LÃ m Cá»§a Báº¡n</h5>
        <form method="POST" action="{{ url_for('upload_student_work') }}" enctype="multipart/form-data">
            <div class="mb-3">
                <input type="file" name="student_file" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-info text-white">Ná»™p bÃ i cho GiÃ¡o viÃªn</button>
        </form>
    </div>
</div>

{% if current_user.role == 'teacher' %}
<div class="alert alert-warning">
    <h4>Khu vá»±c GiÃ¡o ViÃªn (Quáº£n trá»‹)</h4>
    ...
    <hr>
    <h5>Danh sÃ¡ch sinh viÃªn Ä‘Ã£ ná»™p bÃ i:</h5>
    <a href="{{ url_for('view_submissions') }}" class="btn btn-outline-dark btn-sm">Xem chi tiáº¿t bÃ i ná»™p</a>
</div>
{% endif %}

{% endblock %}